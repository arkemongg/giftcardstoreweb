(()=>{"use strict";var e={14:(e,t,n)=>{n.d(t,{M2:()=>i,N0:()=>s});var o=n(594),c=n(335),r=n(779);const a=localStorage.getItem("cart_id");function s(){const e=document.querySelector("#cartToggleBtn"),t=document.querySelector(".cart-details-fixed-area"),n=document.getElementById("cartImage");e.addEventListener("click",(o=>{n.src.includes("shopping.svg")?(n.src="/assets/delete.png",e.classList.toggle("bg-green-500"),e.classList.toggle("hover:bg-green-600")):(n.src="/assets/shopping.svg",e.classList.toggle("bg-green-500"),e.classList.toggle("hover:bg-green-600")),t.classList.toggle("active-right")}))}function l(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=document.querySelector(".cart-details-fixed-area");document.querySelector(".cart-item-total"),document.querySelector(".cart-item-price span"),!1===e&&t.addEventListener("click",(e=>{if("cart-item-remove"==e.target.classList.value){const t=e.target.closest("li").querySelector(".cart-item-total").textContent,n=parseFloat(t.replace(/\$/g,"")),o=document.querySelector(".cart-total-price");let c=parseFloat(o.textContent);//console.log(n),c-=n;const s=document.querySelector(".cart-count");let l=parseFloat(s.textContent);l--,s.textContent=l,o.textContent=c.toFixed(2),e.target.closest("li").remove();const i=`${r.Y}/api/carts/${a}/items/${e.target.id}`;fetch(i,{method:"DELETE"}).then((e=>{if(e.ok){//console.log("Item deleted successfully.");const e=document.querySelector(".flex-cart-list");0===e.childElementCount&&(e.innerHTML='\n        \n                    <h1 style="font-size: 30px; margin: auto;margin-top:50%; width:100px">Empty</h1>\n          \n                    ')}else console.error("Error deleting item.")})).catch((e=>{console.error("Error:",e)}))}})),null!==a&&(0,o.rQ)(`${r.Y}/api/carts/${a}/items`).then((e=>{0===e.length&&(document.querySelector(".flex-cart-list").innerHTML='\n\n          <h1 style="font-size: 30px; margin: auto;margin-top:50%; width:100px">Empty</h1>\n\n          ');const t=e;document.querySelector(".cart-count").textContent=t.length;const n=document.querySelector(".cart-total-price");let s=0;t.forEach((e=>{const t=e.product.title,l=e.product.price,i=e.total_price;s+=i;let d=i.toFixed(2),u="";e.product.image.length>0&&(u=r.Y+e.product.image[0].image);const p=(0,c.aJ)(t,l,d,u),m=document.querySelector(".flex-cart-list");p.querySelector(".cart-select").value=e.quantity,p.querySelector(".cart-item-remove").setAttribute("id",`${e.id}`),p.querySelector(".cart-select").addEventListener("change",(e=>{const t=p.querySelector(".cart-item-total");let n=(e.target.value*l).toFixed(2);t.innerHTML=`${n}$`}));const h=p.querySelector(".cart-select");h.setAttribute("id",e.id),h.addEventListener("change",(e=>{const t=e.target.value,c=e.target.id,s=`${r.Y}/api/carts/${a}/items/${c}/`,l={quantity:t};(0,o.xO)("PATCH",s,"PATCH","Error Updating the data",l).then((e=>{(0,o.xO)("GET",`${r.Y}/api/carts/${a}`,"","Can't get the data").then((e=>{n.textContent=e.total_price}))}))})),m.appendChild(p)})),n.textContent=s.toFixed(2)}))}function i(e){fetch(`${r.Y}/api/carts/${a}/items/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_id:e.getAttribute("id"),quantity:1})}).then((t=>{if(//console.log(t),t.ok)return document.querySelector(".flex-cart-list").innerHTML="",l(!0),t.json();if(400!==t.status)throw new Error("Error: "+t.statusText);t.json().then((t=>{if(e.querySelector(".error-message"));else{const n=document.createElement("p");n.className="error-message text-center",n.textContent=t[0],e.appendChild(n),setTimeout((()=>{e.removeChild(n)}),1e3)}throw new Error("Error: "+t[0])}))}))}//console.log(a),null===a&&new Promise(((e,t)=>{const n=new XMLHttpRequest;n.open("POST",`${r.Y}/api/carts/`,!0),n.setRequestHeader("Content-Type","applicaton/json"),n.send(),n.onload=function(){if(201===n.status){const t=JSON.parse(n.responseText);e(t)}else t(new Error("can't do this "))}})).then((e=>{localStorage.setItem("cart_id",e.id),window.location.reload()})),l(),document.querySelector(".checkout-btn").addEventListener("click",(e=>{const t=localStorage.getItem("cart_id");0==document.querySelector(".flex-cart-list").childElementCount||(document.body.append((0,c.yx)()),setTimeout((()=>{window.location.href=`${r.R}/checkout.html?cart_id=${t}`}),1e3))}))},594:(e,t,n)=>{function o(e,t,n,o,c){return new Promise(((r,a)=>{const s=new XMLHttpRequest;if(s.open(e,t,!0),"USER"==n){const e=localStorage.getItem("accessToken");s.setRequestHeader("Authorization",`JWT ${e}`),s.send()}else"PATCH"===n?(s.setRequestHeader("Content-Type","application/json"),s.send(JSON.stringify(c))):(s.setRequestHeader("Content-Type","applicaton/json"),s.send());s.onload=function(){if("POST"===e)if(201===s.status){const e=JSON.parse(s.responseText);r(e)}else a(new Error(o));else if("GET"==e)if(200===s.status){const e=JSON.parse(s.responseText);r(e)}else a(new Error(o));else"PATCH"===e&&(200===s.status?r(s.statusText):a(new Error(o)))}}))}async function c(e){try{const t=await fetch(e);if(!t.ok)throw new Error("Request failed with status code "+t.status);return await t.json()}catch(e){console.error("Error:",e)}}n.d(t,{rQ:()=>c,xO:()=>o})},215:(e,t,n)=>{function o(){let e=document.querySelector(".nav-responsive"),t=document.querySelector(".nav-response-list");document.getElementById("nav-res-btn").addEventListener("click",(function(n){n.preventDefault(),window.scrollTo({top:0,behavior:"smooth"}),e.classList.toggle("display-none"),e.classList.toggle("display-block"),t.classList.toggle("display-block"),t.classList.toggle("display-none")}))}n.d(t,{P:()=>o})},335:(e,t,n)=>{n.d(t,{Cr:()=>c,D5:()=>s,aJ:()=>r,c6:()=>i,yE:()=>a,yx:()=>l});var o=n(779);function c(e,t,n,o){const c=document.createElement("div");c.className="card";const r=document.createElement("h1");r.style.fontSize="16px",r.style.fontWeight="700",r.style.marginTop="-20px",r.style.padding="10px",r.style.textAlign="center";const a=document.createElement("span");a.className="product-title",a.textContent=e,r.appendChild(a);const s=document.createElement("div");s.className="product-image-area";const l=document.createElement("img");l.src=o||"/assets/no-camera.png",l.alt="Product Image",s.appendChild(l);const i=document.createElement("div");i.className="product-details-area";const d=document.createElement("h1");d.style.fontSize="24px",d.style.fontWeight="900",d.style.padding="2px",d.style.textAlign="center";const u=document.createElement("span");u.className="product-price",u.innerHTML=`${t}`;const p=document.createElement("span");p.innerHTML="$",d.appendChild(u),d.appendChild(p);const m=document.createElement("p");m.style.fontSize="15px",m.style.fontWeight="900",m.style.textAlign="center";const h=document.createElement("span");h.className="product-category",h.textContent=n,m.appendChild(h);const g=document.createElement("div");g.className="product-btn-area";const f=document.createElement("button");f.className="bg-green-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded buy-now",f.textContent="Buy Now";const y=document.createElement("button");return y.className="bg-red-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded add-to-cart",y.textContent="Add to cart",c.appendChild(r),c.appendChild(s),c.appendChild(i),c.appendChild(g),i.appendChild(d),i.appendChild(m),g.appendChild(f),g.appendChild(y),c}const r=(e,t,n,o)=>{const c=document.createElement("li");c.classList.add("flex-cart-items");const r=document.createElement("div");r.classList.add("cart-item-img");const a=document.createElement("img");a.src=o||"/assets/no-camera.png",a.alt="product",r.appendChild(a);const s=document.createElement("div");s.classList.add("cart-item-quantity-remove");const l=document.createElement("div");l.classList.add("cart-item-remove-btn");const i=document.createElement("img");i.classList.add("cart-item-remove"),i.src="/assets/bin.png",i.alt="remove",i.style.width="30px",l.appendChild(i);const d=document.createElement("div");d.classList.add("cart-item-quantity");const u=document.createElement("select");u.classList.add("cart-select"),u.style.backgroundColor="#111827";const p=document.createElement("option");p.value="1",p.selected=!0,p.textContent="1",u.appendChild(p);const m=document.createElement("option");m.value="2",m.textContent="2",u.appendChild(m);const h=document.createElement("option");h.value="3",h.textContent="3",u.appendChild(h);const g=document.createElement("option");g.value="4",g.textContent="4",u.appendChild(g);const f=document.createElement("option");f.value="5",f.textContent="5",u.appendChild(f),d.appendChild(u),s.appendChild(l),s.appendChild(d);const y=document.createElement("div");y.classList.add("cart-item-details"),y.style.marginRight="10px";const v=document.createElement("div");v.classList.add("cart-item-name");const w=document.createElement("p");w.style.fontSize="11px",w.textContent="Name : "+e,v.appendChild(w);const E=document.createElement("div");E.classList.add("cart-item-price"),E.style.fontSize="11px",E.textContent="Price : "+t,y.appendChild(v),y.appendChild(E);const C=document.createElement("div");return C.classList.add("cart-item-total"),C.style.fontSize="14px",C.innerHTML=`${n}$`,c.appendChild(r),c.appendChild(s),c.appendChild(y),c.appendChild(C),c};function a(){const e=document.createElement("div");e.classList.add("logout-area"),e.classList.add("hidden");const t=document.createElement("div");t.classList.add("close-user-profile-options"),t.textContent="x",e.appendChild(t);const n=document.createElement("a");n.href=`${o.R}/profile.html`;const c=document.createElement("button");c.classList.add("profile"),c.textContent="Profile",n.appendChild(c),e.appendChild(n);const r=document.createElement("button");return r.classList.add("logout"),r.textContent="Logout",e.appendChild(r),e}function s(){const e=document.createElement("li");e.classList.add("responsive-profile");const t=document.createElement("a");t.href=`${o.R}/profile.html`;const n=document.createElement("button");n.textContent="Profile",t.appendChild(n),e.appendChild(t);const c=document.createElement("li");c.classList.add("responsive-logout");const r=document.createElement("a");r.href="#";const a=document.createElement("button");return a.classList.add("logout"),a.textContent="Logout",r.appendChild(a),c.appendChild(r),[e,c]}function l(){const e=document.createElement("div");e.classList.add("loading-btn-effect","btn-action");const t=document.createElement("div");t.classList.add("inline-block","h-8","w-8","animate-spin","rounded-full","border-4","border-solid","border-current","border-r-transparent","align-[-0.125em]","motion-reduce:animate-[spin_1.5s_linear_infinite]"),t.setAttribute("role","status");const n=document.createElement("span");return n.classList.add("!absolute","!-m-px","!h-px","!w-px","!overflow-hidden","!whitespace-nowrap","!border-0","!p-0","![clip:rect(0,0,0,0)]"),n.innerText="Loading...",t.appendChild(n),e.appendChild(t),e}const i=l()},779:(e,t,n)=>{n.d(t,{R:()=>c,Y:()=>o});const o="http://127.0.0.1:8000",c="http://127.0.0.1:5500"},970:(e,t,n)=>{n.d(t,{Jp:()=>r});var o=n(335),c=n(779);function r(){new Promise(((e,t)=>{const n=localStorage.getItem("accessToken");if(//console.log(n),"undefined"!==n&&null!==n){const o=new XMLHttpRequest;o.open("GET",`${c.Y}/auth/users`,!0),o.setRequestHeader("Authorization",`JWT ${n}`),o.send(),o.onload=function(){if(200===o.status){const t=JSON.parse(o.responseText);e(t)}else localStorage.removeItem("accessToken"),t(new Error("Access token is invalid or expired."))},o.onerror=function(){t(new Error("An error occurred while making the request."))}}else t(new Error("Access token is undefined."))})).then((e=>{//console.log(e),document.querySelector("body").style.display="block";const t=document.querySelector("#nav-login-register"),n=document.querySelector("#nav-response-login-register"),c=`<a href="#">${e[0].username}&#9662</a>`;t.innerHTML=c,n.innerHTML=c,(window.location.href.includes("login.html")||window.location.href.includes("signup.html")||window.location.href.includes("password_reset.html"))&&(window.location.href="profile.html");const r=document.querySelector(".nav-response-list"),[a,s]=(0,o.D5)();r.appendChild(a),r.appendChild(s);const l=document.querySelector(".nav-area"),i=(0,o.yE)();l.appendChild(i);const d=document.querySelector(".close-user-profile-options"),u=document.querySelector(".logout-area");t.addEventListener("click",(e=>{e.preventDefault(),u.classList.toggle("hidden")})),d.addEventListener("click",(e=>{e.preventDefault(),u.classList.toggle("hidden")}))})).catch((e=>{window.location.href.includes("profile.html")&&(window.location.href="login.html"),console.error("Error:",e.message)}))}document.body.addEventListener("click",(e=>{const t=(0,o.yx)();if(e.target.classList.contains("logout")){document.body.appendChild(t),localStorage.removeItem("accessToken");const e=`${c.R}`;setTimeout((()=>{window.location.href=e}),1e3)}}))}},t={};function n(o){var c=t[o];if(void 0!==c)return c.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=n(335),t=n(594),o=n(215),c=n(970),r=n(14),a=n(779);document.body.appendChild(e.c6),(0,o.P)(),(0,c.Jp)(),(0,r.N0)();const s=document.getElementById("prevBtn"),l=document.getElementById("nextBtn");document.querySelector(".products-section");const i=document.querySelector(".products-cards"),d=new URL(`${a.Y}/api/products/`),u=new URLSearchParams(window.location.search),p=u.get("category");null!==p&&d.searchParams.set("category",p);const m=u.get("limit"),h=u.get("offset");d.searchParams.set("limit",m),d.searchParams.set("offset",h);const g=document.getElementById("category-select");(0,t.rQ)(`${a.Y}/api/categories/`).then((e=>{const t=document.createElement("option");t.value="none",t.text="None",g.appendChild(t),e.forEach((e=>{const t=document.createElement("option");t.value=e.id,t.text=e.title,g.appendChild(t)})),g.value=null===p?"category":p})),g.addEventListener("input",(e=>{const t=document.getElementById("items-per-page");//console.log(t.value),"none"===e.target.value||"category"===e.target.value?t.value>0?window.location.href=`${a.R}/products.html?limit=${t.value}`:window.location.href=`${a.R}/products.html`:t.value>0?window.location.href=`${a.R}/products.html?category=${e.target.value}&limit=${t.value}`:window.location.href=`${a.R}/products.html?category=${e.target.value}`}));var f=null,y=null;function v(n){i.innerHTML="",document.body.appendChild(e.c6);const o=n;(0,t.rQ)(o).then((t=>{t.results.forEach((t=>{let n="";t.image.length>0&&(n=t.image[0].image);const o=(0,e.Cr)(t.title,t.price,t.category.title,n),c=o.querySelector(".add-to-cart"),s=o.querySelector(".buy-now");s.addEventListener("click",(function(){window.location.href=`${a.R}/buynow.html?id=${t.id}`})),c.addEventListener("click",(e=>{!function(e){const t=e.target.closest(".card");(0,r.M2)(t)}(e)})),0===t.inventory&&(s.disabled=!0,s.textContent="Out of Stock",c.disabled=!0,c.textContent="Out of Stock"),o.setAttribute("id",`${t.id}`),i.appendChild(o)})),y=t.previous,f=t.next,s.style.cursor=null===y?"not-allowed":"pointer",l.style.cursor=null===f?"not-allowed":"pointer",setTimeout((()=>{document.body.removeChild(e.c6)}),1e3)})).catch((e=>{//console.log(e)}))}v(d),s.addEventListener("click",(()=>{if(y){const e=new URL(y),t=new URL(window.location.href);window.history.replaceState(null,null,t.origin+t.pathname+e.search),v(y),window.scrollTo({top:0,behavior:"smooth"})}})),l.addEventListener("click",(()=>{if(f){const e=new URL(f),t=new URL(window.location.href);window.history.replaceState(null,null,t.origin+t.pathname+e.search),v(f),window.scrollTo({top:0,behavior:"smooth"})}}));const w=document.getElementById("items-per-page");null!==m&&(w.value=m),w.addEventListener("input",(e=>{if(e.target.value>0&&e.target.value<=32){const t=new URL(window.location.href),n=e.target.value;t.searchParams.set("limit",n),t.searchParams.delete("offset"),window.history.replaceState(null,null,t.href),v(new URL(`${a.Y}/api/products/`)+t.search)}}));const E=document.querySelector("#search-dropdown"),C=document.querySelector(".search-btn");null!==u.get("search")&&(E.value=u.get("search")),C.addEventListener("click",(e=>{if(e.preventDefault(),""===E.value)return null;const t=new URL(window.location.href);t.searchParams.delete("offset"),t.searchParams.set("search",E.value),window.history.replaceState(null,null,t.href),v(d+t.search)})),E.addEventListener("input",(e=>{if(""===e.target.value){const e=new URL(window.location.href);e.searchParams.delete("search"),e.searchParams.delete("offset"),window.history.replaceState(null,null,e.href),v(d+e.search)}})),document.querySelector("#nav-categories").addEventListener("click",(e=>{g.focus()})),window.addEventListener("load",(t=>{setTimeout((()=>{document.body.removeChild(e.c6)}),1e3)}))})()})();