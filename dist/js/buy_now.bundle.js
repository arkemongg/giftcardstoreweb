(()=>{"use strict";var e={594:(e,t,n)=>{async function o(e){try{const t=await fetch(e);if(!t.ok)throw new Error("Request failed with status code "+t.status);return await t.json()}catch(e){console.error("Error:",e)}}function c(){return new Promise(((e,t)=>{const n=new XMLHttpRequest;n.open("POST","http://127.0.0.1:8000/api/carts/",!0),n.setRequestHeader("Content-Type","applicaton/json"),n.send(),n.onload=function(){if(201===n.status){const t=JSON.parse(n.responseText);e(t)}else t(new Error("can't do this "))}}))}async function r(e,t){try{const n=await fetch("http://127.0.0.1:8000/api/orders/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`JWT ${e}`},body:JSON.stringify({cart_id:t})});if(console.log("ok"),n.ok){const e=await n.json();return console.log(e),e}throw console.log(n),new Error("Error: "+n.status)}catch(e){throw console.error(e),e}}function d(e,t){return fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{if(e.ok)return e.json();throw new Error("POST request failed")})).catch((e=>{console.error("Error:",e)}))}n.d(t,{$Y:()=>c,Dv:()=>d,LV:()=>r,rQ:()=>o})},215:(e,t,n)=>{function o(){let e=document.querySelector(".nav-responsive"),t=document.querySelector(".nav-response-list");document.getElementById("nav-res-btn").addEventListener("click",(function(n){n.preventDefault(),window.scrollTo({top:0,behavior:"smooth"}),e.classList.toggle("display-none"),e.classList.toggle("display-block"),t.classList.toggle("display-block"),t.classList.toggle("display-none")}))}n.d(t,{P:()=>o})},335:(e,t,n)=>{n.d(t,{BU:()=>r,D5:()=>s,gC:()=>c,yE:()=>d,yx:()=>a});var o=n(779);function c(e,t,n,o,c){const r=document.createElement("div");r.classList.add("product-container-card");const d=document.createElement("div");d.classList.add("checkout-item-img");const s=document.createElement("img");s.src=c||"/assets/no-camera.png",s.alt="product-image",d.appendChild(s),r.appendChild(d);const a=document.createElement("div");a.classList.add("checkout-item-quantity-remove");const i=document.createElement("div");i.classList.add("checkout-item-quantity");const l=document.createElement("select");l.classList.add("checkout-select","bg-gray-50","border","border-gray-300","text-gray-900","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500");for(let t=1;t<=5;t++){const n=document.createElement("option");n.value=t,n.textContent=t,t===e&&(n.selected=!0),l.appendChild(n)}i.appendChild(l),a.appendChild(i),r.appendChild(a);const u=document.createElement("div");u.classList.add("checkout-item-details");const p=document.createElement("div");p.classList.add("checkout-item-name");const m=document.createElement("p");m.textContent=t,p.appendChild(m);const h=document.createElement("div");h.classList.add("checkout-item-price");const g=document.createElement("span");g.textContent="$";const f=document.createElement("span");f.classList.add("checkout-item-price"),f.classList.add("checkout-item-price-total"),f.textContent=n,h.appendChild(g),h.appendChild(f),u.appendChild(p),u.appendChild(h),r.appendChild(u);const v=document.createElement("div");v.classList.add("checkout-item-total"),v.style.fontSize="14px";const L=document.createElement("span");L.textContent="$";const y=document.createElement("span");y.classList.add("checkout-item-total-price"),y.textContent=o,v.appendChild(L),v.appendChild(y),r.appendChild(v);const E=document.createElement("div");E.classList.add("checkout-item-remove-btn");const b=document.createElement("img");return b.classList.add("checkout-item-remove"),b.src="/assets/bin.png",b.alt="remove",E.appendChild(b),r.appendChild(E),r}function r(e,t,n){const o=document.createElement("div");o.classList.add("details-checkout-item-container-title");const c=document.createElement("p");c.classList.add("checkout-item-title-title"),c.textContent=e,o.appendChild(c);const r=document.createElement("p");r.classList.add("checkout-item-title-price"),r.textContent="$"+t,o.appendChild(r);const d=document.createElement("p");return d.classList.add("checkout-item-title-quantity"),d.textContent=n,o.appendChild(d),o}function d(){const e=document.createElement("div");e.classList.add("logout-area"),e.classList.add("hidden");const t=document.createElement("div");t.classList.add("close-user-profile-options"),t.textContent="x",e.appendChild(t);const n=document.createElement("a");n.href=`${o.R}/profile.html`;const c=document.createElement("button");c.classList.add("profile"),c.textContent="Profile",n.appendChild(c),e.appendChild(n);const r=document.createElement("button");return r.classList.add("logout"),r.textContent="Logout",e.appendChild(r),e}function s(){const e=document.createElement("li");e.classList.add("responsive-profile");const t=document.createElement("a");t.href=`${o.R}/profile.html`;const n=document.createElement("button");n.textContent="Profile",t.appendChild(n),e.appendChild(t);const c=document.createElement("li");c.classList.add("responsive-logout");const r=document.createElement("a");r.href="#";const d=document.createElement("button");return d.classList.add("logout"),d.textContent="Logout",r.appendChild(d),c.appendChild(r),[e,c]}function a(){const e=document.createElement("div");e.classList.add("loading-btn-effect","btn-action");const t=document.createElement("div");t.classList.add("inline-block","h-8","w-8","animate-spin","rounded-full","border-4","border-solid","border-current","border-r-transparent","align-[-0.125em]","motion-reduce:animate-[spin_1.5s_linear_infinite]"),t.setAttribute("role","status");const n=document.createElement("span");return n.classList.add("!absolute","!-m-px","!h-px","!w-px","!overflow-hidden","!whitespace-nowrap","!border-0","!p-0","![clip:rect(0,0,0,0)]"),n.innerText="Loading...",t.appendChild(n),e.appendChild(t),e}a()},779:(e,t,n)=>{n.d(t,{R:()=>c,Y:()=>o});const o="http://127.0.0.1:8000",c="http://127.0.0.1:5500"},970:(e,t,n)=>{n.d(t,{Jp:()=>c});var o=n(335);function c(){new Promise(((e,t)=>{const n=localStorage.getItem("accessToken");if(console.log(n),"undefined"!==n&&null!==n){const o=new XMLHttpRequest;o.open("GET","http://127.0.0.1:8000/auth/users",!0),o.setRequestHeader("Authorization",`JWT ${n}`),o.send(),o.onload=function(){if(200===o.status){const t=JSON.parse(o.responseText);e(t)}else localStorage.removeItem("accessToken"),t(new Error("Access token is invalid or expired."))},o.onerror=function(){t(new Error("An error occurred while making the request."))}}else t(new Error("Access token is undefined."))})).then((e=>{console.log(e),document.querySelector("body").style.display="block";const t=document.querySelector("#nav-login-register"),n=document.querySelector("#nav-response-login-register"),c=`<a href="#">${e[0].username}&#9662</a>`;t.innerHTML=c,n.innerHTML=c,(window.location.href.includes("login.html")||window.location.href.includes("signup.html")||window.location.href.includes("password_reset.html"))&&(window.location.href="profile.html");const r=document.querySelector(".nav-response-list"),[d,s]=(0,o.D5)();r.appendChild(d),r.appendChild(s);const a=document.querySelector(".nav-area"),i=(0,o.yE)();a.appendChild(i);const l=document.querySelector(".close-user-profile-options"),u=document.querySelector(".logout-area");t.addEventListener("click",(e=>{e.preventDefault(),u.classList.toggle("hidden")})),l.addEventListener("click",(e=>{e.preventDefault(),u.classList.toggle("hidden")}))})).catch((e=>{window.location.href.includes("profile.html")&&(window.location.href="login.html"),console.error("Error:",e.message)}))}document.body.addEventListener("click",(e=>{const t=(0,o.yx)();if(e.target.classList.contains("logout")){document.body.appendChild(t),localStorage.removeItem("accessToken");const e="http://127.0.0.1:5500/";setTimeout((()=>{window.location.href=e}),1e3)}}))}},t={};function n(o){var c=t[o];if(void 0!==c)return c.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=n(970),t=n(215),o=n(594),c=n(335),r=n(779);(0,t.P)(),(0,e.Jp)();const d=new URL(window.location.href),s=new URLSearchParams(d.search).get("id"),a=document.querySelector(".product-container"),i=(0,o.rQ)(`${r.Y}/api/products/${s}/`);let l=0;i.then((e=>{let t="";e.image.length>0&&(t=e.image[0].image);const n=e.title,o=e.price,r=e.price,d=(0,c.gC)(1,n,o,r,t);a.appendChild(d),l+=e.price;const s=a.querySelectorAll(".checkout-select"),i=document.querySelector(".total-checkout-amount-value");function u(){0===a.childElementCount&&(document.querySelectorAll(".checkout-options button").forEach((e=>{e.disabled=!0})),a.innerHTML="empty")}i.textContent=l.toFixed(2),s.forEach((t=>{t.addEventListener("change",(t=>{const n=t.target.closest(".product-container-card").querySelector(".checkout-item-total-price");l=(t.target.value*e.price).toFixed(2),n.textContent=l,i.textContent=l}))})),a.addEventListener("click",(e=>{e.target.classList.contains("checkout-item-remove")&&(e.target.closest(".product-container-card").remove(),i.textContent="0000"),u()})),u()})).catch((e=>{console.log(e),document.querySelectorAll(".checkout-options button").forEach((e=>{e.disabled=!0})),a.innerHTML="error"}));const u=document.querySelector(".checkout-checkout"),p=document.querySelector(".details-checkout-item-container"),m=document.querySelector(".checkout-page-containers"),h=document.querySelector(".your-account-details"),g=document.querySelector(".account-page-container"),f=localStorage.getItem("accessToken");h.disabled=!0,null==f&&(h.disabled=!1,u.disabled=!0);const v=document.querySelector(".your-product");v.disabled=!0;const L=document.querySelector(".order-details-container");v.addEventListener("click",(e=>{if(null!==f){u.disabled=!1,u.classList.remove("active-border"),m.classList.add("hidden");const e=p.firstElementChild;p.innerHTML="",p.appendChild(e)}else g.classList.add("hidden"),h.classList.remove("active-border"),h.disabled=!1;L.classList.remove("hidden"),v.disabled=!0,v.classList.add("active-border")})),u.addEventListener("click",(e=>{u.disabled=!0,v.disabled=!1,v.classList.remove("active-border"),L.classList.add("hidden"),u.classList.add("active-border"),m.classList.remove("hidden");const t=document.querySelector(".total-tax-shiping .total-value"),n=a.firstElementChild,o=n.querySelector("select").value,r=n.querySelector(".checkout-item-name p").textContent,d=n.querySelector(".checkout-item-price-total").textContent,s=d*o,i=(0,c.BU)(r,d,o);p.appendChild(i),t.textContent="$"+s.toFixed(2),document.querySelector(".checkout-create-order").setAttribute("id",o)})),h.addEventListener("click",(e=>{v.disabled=!1,v.classList.remove("active-border"),L.classList.add("hidden"),h.disabled=!0,h.classList.add("active-border"),g.classList.remove("hidden")})),document.querySelector(".checkout-next-btn").addEventListener("click",(e=>{!0===h.disabled?u.click():h.click()})),document.querySelector(".account-page-login-sign-up").addEventListener("click",(()=>{window.location.href="http://127.0.0.1:5500/login.html"}));const y=document.querySelector(".checkout-create-order");y.addEventListener("click",(e=>{(0,o.$Y)().then((e=>{const t=`http://127.0.0.1:8000/api/carts/${e.id}/items/`,n={product_id:s,quantity:y.getAttribute("id")};(0,o.Dv)(t,n).then((t=>{(0,o.LV)(f,e.id).then((e=>{window.location.href="http://127.0.0.1:5500/order_created.html"}))}))}))}))})()})();