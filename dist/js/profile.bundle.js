(()=>{"use strict";var e={594:(e,t,s)=>{function n(e,t,s,n,o){return new Promise(((r,d)=>{const a=new XMLHttpRequest;if(a.open(e,t,!0),"USER"==s){const e=localStorage.getItem("accessToken");a.setRequestHeader("Authorization",`JWT ${e}`),a.send()}else"PATCH"===s?(a.setRequestHeader("Content-Type","application/json"),a.send(JSON.stringify(o))):(a.setRequestHeader("Content-Type","applicaton/json"),a.send());a.onload=function(){if("POST"===e)if(201===a.status){const e=JSON.parse(a.responseText);r(e)}else d(new Error(n));else if("GET"==e)if(200===a.status){const e=JSON.parse(a.responseText);r(e)}else d(new Error(n));else"PATCH"===e&&(200===a.status?r(a.statusText):d(new Error(n)))}}))}s.d(t,{xO:()=>n})},215:(e,t,s)=>{function n(){let e=document.querySelector(".nav-responsive"),t=document.querySelector(".nav-response-list");document.getElementById("nav-res-btn").addEventListener("click",(function(s){s.preventDefault(),window.scrollTo({top:0,behavior:"smooth"}),e.classList.toggle("display-none"),e.classList.toggle("display-block"),t.classList.toggle("display-block"),t.classList.toggle("display-none")}))}s.d(t,{P:()=>n})},335:(e,t,s)=>{s.d(t,{D5:()=>a,HV:()=>r,R$:()=>o,c6:()=>l,uo:()=>c,yE:()=>d,yx:()=>i});var n=s(779);function o(e,t,s,n,o,r){const d="-"!==n?`<a href="${n}" target="_blank">Pay Here</a>`:"-",a=document.createElement("li");return a.classList.add("order-list-details"),a.innerHTML=`\n    <div class="order-list-details-tiem order-id" style="color:\t#03a9f4">${e}</div>\n    <div class="order-list-details-tiem order-payemnt-status">${t}</div>\n    <div class="order-list-details-tiem order-status">${s}</div>\n    <div class="order-list-details-tiem order-payment-url">${d}</div>\n    <div class="order-list-details-tiem order-total-price"><span>$</span> ${o}</div>\n    <div class="order-list-details-tiem order-created-at">${r}</div>\n  `,a}function r(e,t,s){const n=document.createElement("li");n.classList.add("order-items-item"),n.style.fontSize="10px";const o=document.createElement("div");o.classList.add("order-items-item-details","order-item-title"),o.textContent=e;const r=document.createElement("div");r.classList.add("order-items-item-details","order-item-price"),r.textContent=t;const d=document.createElement("div");return d.classList.add("order-items-item-details","order-item-quantity"),d.textContent=s,n.appendChild(o),n.appendChild(r),n.appendChild(d),n}function d(){const e=document.createElement("div");e.classList.add("logout-area"),e.classList.add("hidden");const t=document.createElement("div");t.classList.add("close-user-profile-options"),t.textContent="x",e.appendChild(t);const s=document.createElement("a");s.href=`${n.R}/profile.html`;const o=document.createElement("button");o.classList.add("profile"),o.textContent="Profile",s.appendChild(o),e.appendChild(s);const r=document.createElement("button");return r.classList.add("logout"),r.textContent="Logout",e.appendChild(r),e}function a(){const e=document.createElement("li");e.classList.add("responsive-profile");const t=document.createElement("a");t.href=`${n.R}/profile.html`;const s=document.createElement("button");s.textContent="Profile",t.appendChild(s),e.appendChild(t);const o=document.createElement("li");o.classList.add("responsive-logout");const r=document.createElement("a");r.href="#";const d=document.createElement("button");return d.classList.add("logout"),d.textContent="Logout",r.appendChild(d),o.appendChild(r),[e,o]}function i(){const e=document.createElement("div");e.classList.add("loading-btn-effect","btn-action");const t=document.createElement("div");t.classList.add("inline-block","h-8","w-8","animate-spin","rounded-full","border-4","border-solid","border-current","border-r-transparent","align-[-0.125em]","motion-reduce:animate-[spin_1.5s_linear_infinite]"),t.setAttribute("role","status");const s=document.createElement("span");return s.classList.add("!absolute","!-m-px","!h-px","!w-px","!overflow-hidden","!whitespace-nowrap","!border-0","!p-0","![clip:rect(0,0,0,0)]"),s.innerText="Loading...",t.appendChild(s),e.appendChild(t),e}const l=i(),c=async(e,t)=>{const s=`${n.Y}/auth/password/validate/`,o={Authorization:`JWT ${t}`,"Content-Type":"application/json"},r={current_password:e};try{const e=await fetch(s,{method:"POST",headers:o,body:JSON.stringify(r)});if(e.ok)return await e.json();throw new Error("Invalid password")}catch(e){throw e}}},779:(e,t,s)=>{s.d(t,{R:()=>o,Y:()=>n});const n="http://127.0.0.1:8000",o="http://127.0.0.1:5500"},970:(e,t,s)=>{s.d(t,{Jp:()=>d,Kv:()=>r,d_:()=>a});var n=s(335),o=s(779);function r(){return new Promise(((e,t)=>{const s=localStorage.getItem("accessToken");if(console.log(s),"undefined"!==s&&null!==s){const n=new XMLHttpRequest;n.open("GET",`${o.Y}/auth/users`,!0),n.setRequestHeader("Authorization",`JWT ${s}`),n.send(),n.onload=function(){if(200===n.status){const t=JSON.parse(n.responseText);e(t)}else localStorage.removeItem("accessToken"),t(new Error("Access token is invalid or expired."))},n.onerror=function(){t(new Error("An error occurred while making the request."))}}else t(new Error("Access token is undefined."))}))}function d(){r().then((e=>{console.log(e),document.querySelector("body").style.display="block";const t=document.querySelector("#nav-login-register"),s=document.querySelector("#nav-response-login-register"),o=`<a href="#">${e[0].username}&#9662</a>`;t.innerHTML=o,s.innerHTML=o,(window.location.href.includes("login.html")||window.location.href.includes("signup.html")||window.location.href.includes("password_reset.html"))&&(window.location.href="profile.html");const r=document.querySelector(".nav-response-list"),[d,a]=(0,n.D5)();r.appendChild(d),r.appendChild(a);const i=document.querySelector(".nav-area"),l=(0,n.yE)();i.appendChild(l);const c=document.querySelector(".close-user-profile-options"),u=document.querySelector(".logout-area");t.addEventListener("click",(e=>{e.preventDefault(),u.classList.toggle("hidden")})),c.addEventListener("click",(e=>{e.preventDefault(),u.classList.toggle("hidden")}))})).catch((e=>{window.location.href.includes("profile.html")&&(window.location.href="login.html"),console.error("Error:",e.message)}))}function a(){return new Promise(((e,t)=>{const s=localStorage.getItem("accessToken"),n=new XMLHttpRequest;n.open("GET",`${o.Y}/api/customer`,!0),n.setRequestHeader("Authorization",`JWT ${s}`),n.send(),n.onload=function(){if(200===n.status){const t=JSON.parse(n.responseText);e(t)}else t(new Error("Customer is not accessable"))},n.onerror=function(){t(new Error("An error occurred while making the request."))}}))}document.body.addEventListener("click",(e=>{const t=(0,n.yx)();if(e.target.classList.contains("logout")){document.body.appendChild(t),localStorage.removeItem("accessToken");const e=`${o.R}`;setTimeout((()=>{window.location.href=e}),1e3)}}))}},t={};function s(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,s),r.exports}s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=s(215),t=s(970),n=s(594),o=s(335),r=s(779);document.body.appendChild(o.c6),(0,e.P)(),(0,t.Jp)();const d=document.querySelector(".edit-profile-btn"),a=document.querySelector(".view-user-account-feature-field").children;d.addEventListener("click",(e=>{e.preventDefault();const t=e.target.closest("li").querySelector("a");if(t.classList.contains("active"));else{d.querySelectorAll("li").forEach((e=>{e.childNodes[1].className="inline-flex p-4 border-b-2 border-transparent rounded-t-lg hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300 group"})),t.className="",t.style.transition="0.5s",t.className="active inline-flex p-4 text-blue-600 border-b-2 border-blue-600 rounded-t-lg dark:text-blue-500 dark:border-blue-500 group";for(let e=0;e<a.length;e++)a[e].style.display="none";e.target.closest("li").classList[0]>=0&&e.target.closest("li").classList[0]<=1&&(a[e.target.closest("li").classList[0]].style.display="block")}}));const i=document.querySelector(".membership-status"),l=document.querySelector(".user-fullname-data"),c=document.querySelector(".user-username-data"),u=document.querySelector(".user-email-data"),m=document.querySelector("#user_email"),p=document.querySelector("#user_name"),h=document.querySelector("#new-first-name"),f=document.querySelector("#new-last-name"),y=document.querySelector("#new-phone"),v=document.querySelector("#new-birth-date");(0,t.Kv)().then((e=>{const t=e[0];l.innerHTML=`${t.first_name} ${t.last_name}`,c.innerHTML=`${t.username}`,u.innerHTML=`${t.email}`,m.value=t.email,p.value=`@${t.username}`,h.value=t.first_name,f.value=t.last_name})),(0,t.d_)().then((e=>{const t=e[0];i.innerHTML=t.membership,y.value=t.phone,console.log(t),v.value=t.birth_date}));const g=(0,n.xO)("GET",`${r.Y}/api/orders/`,"USER","can't fetch the order");function L(e){let t="";return"P"===e?t="PENDING":"C"===e?t="COMPLETE":"F"==e&&(t="FAILED"),t}const w=document.querySelector(".order-list");g.then((e=>{let t=0;if(0===e.length);else{function s(){for(let s=t;s<Math.min(e.length,t+10);s++){const t=e[s],n=`<button class="order-id-btn">${t.pk}</button>`,r=L(t.payment_status),d=L(t.order_status),a=t.payment_url,i=t.total_price,l=t.created_at.split("T")[0],c=(0,o.R$)(n,r,d,a,i,l);w.appendChild(c)}}s();const n=document.querySelector(".load-more");n.classList.remove("hidden"),10>=e.length&&n.classList.add("hidden"),n.addEventListener("click",(o=>{t+=10,t!==e.length?s():n.classList.add("hidden")}))}}));const E=document.querySelector(".order-items-items"),b=document.querySelector(".order-items-container");document.querySelector(".order-items-hide-btn").addEventListener("click",(e=>{const t=E.firstElementChild;E.innerHTML="",E.appendChild(t),b.style.display="none"})),w.addEventListener("click",(e=>{e.target.classList.contains("order-id-btn")&&(document.body.appendChild(o.c6),document.querySelector(".order-items-order-id").innerHTML=`ORDER ID : ${e.target.textContent}`,(0,n.xO)("GET",`${r.Y}/api/orders/${e.target.textContent}/`,"USER","can't fetch the order").then((e=>{e.items.forEach((e=>{const t=e.product.title,s=e.unit_price,n=e.quantity,r=(0,o.HV)(t,s,n);E.appendChild(r)}))})),b.style.display="block",setTimeout((()=>{document.body.removeChild(o.c6)}),400))}));const T=document.querySelector(".update-profile");let C=!1;const S=document.getElementById("new-password"),x=document.getElementById("repeat-password");!function(){const e=document.getElementById("password-error"),t=document.getElementById("password-warning");let s=!1;function n(){if(s)return S.value===x.value?(e.classList.add("hidden"),!0):(e.classList.remove("hidden"),!1)}x.addEventListener("focus",(function(){s=!0})),S.addEventListener("input",(function(){let e=function(){const e=S.value,s=/[A-Z]/.test(e),n=/[a-z]/.test(e),o=/[0-9]/.test(e),r=e.length>=8,d=/[a-zA-Z]/.test(e);return s&&n&&o&&d&&r?(t.textContent="",t.classList.add("hidden"),!0):(t.textContent="Password must contain at least 1 uppercase letter, 1 lowercase letter, 1 number, and be at least 8 characters long.",t.classList.remove("hidden"),!1)}(),s=n();C=!(!s||!e),""===S.value&&t.classList.add("hidden")})),x.addEventListener("input",(()=>{let e=n();C=!!e}))}();const q=localStorage.getItem("accessToken");T.addEventListener("click",(e=>{e.preventDefault(),document.body.appendChild(o.c6),document.querySelector(".edit-profile-submit-btn");const t=document.querySelector(".profile-update-message"),s=document.getElementById("new-password").value,n=document.getElementById("repeat-password").value,d=document.getElementById("current-password").value;if(""!==d)if(!1!==C||""===s&&""===n)if(""===s&&""===n)(0,o.uo)(d,q).then((e=>{console.log(e)})).catch((e=>{setTimeout((()=>{document.body.removeChild(o.c6),t.style.color="red",t.textContent=e.message,t.classList.add("shake-message"),t.classList.remove("hidden"),setTimeout((()=>{t.classList.remove("shake-message")}),1e3),setTimeout((()=>{t.classList.add("hidden")}),5e3)}),1e3)}));else{const e=`${r.Y}/auth/users/set_password/`,n={current_password:d,new_password:s};fetch(e,{method:"POST",headers:{Authorization:`JWT ${q}`,"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>{204===e.status?setTimeout((()=>{document.body.removeChild(o.c6),t.style.color="green",t.textContent="Profile Updated Successfully",t.style.padding="5px",t.classList.add("shake-message"),t.classList.remove("hidden"),setTimeout((()=>{t.classList.remove("shake-message")}),1e3),setTimeout((()=>{window.location.reload()}),3e3)}),1e3):(console.log(e),setTimeout((()=>{document.body.removeChild(o.c6),t.style.color="red",t.textContent="Invalid current password",t.classList.add("shake-message"),t.classList.remove("hidden"),setTimeout((()=>{t.classList.remove("shake-message")}),1e3),setTimeout((()=>{t.classList.add("hidden")}),5e3)}),1e3))})).catch((e=>{console.error("Error:",e)}))}else setTimeout((()=>{document.body.removeChild(o.c6),t.style.color="red",t.textContent="please recheck new passwords",t.classList.add("shake-message"),t.classList.remove("hidden"),setTimeout((()=>{t.classList.remove("shake-message")}),1e3),setTimeout((()=>{t.classList.add("hidden")}),5e3)}),1e3);else setTimeout((()=>{document.body.removeChild(o.c6),t.style.color="red",t.textContent="current password is empty",t.classList.add("shake-message"),t.classList.remove("hidden"),setTimeout((()=>{t.classList.remove("shake-message")}),1e3),setTimeout((()=>{t.classList.add("hidden")}),5e3)}),1e3)})),window.addEventListener("load",(e=>{setTimeout((()=>{document.body.removeChild(o.c6)}),1e3)}))})()})();