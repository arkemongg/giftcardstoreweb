(()=>{"use strict";var e={594:(e,t,n)=>{function o(e,t,n,o,r){return new Promise(((s,i)=>{const l=new XMLHttpRequest;if(l.open(e,t,!0),"USER"==n){const e=localStorage.getItem("accessToken");l.setRequestHeader("Authorization",`JWT ${e}`),l.send()}else"PATCH"===n?(l.setRequestHeader("Content-Type","application/json"),l.send(JSON.stringify(r))):(l.setRequestHeader("Content-Type","applicaton/json"),l.send());l.onload=function(){if("POST"===e)if(201===l.status){const e=JSON.parse(l.responseText);s(e)}else i(new Error(o));else if("GET"==e)if(200===l.status){const e=JSON.parse(l.responseText);s(e)}else i(new Error(o));else"PATCH"===e&&(200===l.status?s(l.statusText):i(new Error(o)))}}))}n.d(t,{xO:()=>o})},215:(e,t,n)=>{function o(){let e=document.querySelector(".nav-responsive"),t=document.querySelector(".nav-response-list");document.getElementById("nav-res-btn").addEventListener("click",(function(n){n.preventDefault(),window.scrollTo({top:0,behavior:"smooth"}),e.classList.toggle("display-none"),e.classList.toggle("display-block"),t.classList.toggle("display-block"),t.classList.toggle("display-none")}))}n.d(t,{P:()=>o})},335:(e,t,n)=>{n.d(t,{D5:()=>l,HV:()=>s,R$:()=>r,c6:()=>a,yE:()=>i,yx:()=>d});var o=n(779);function r(e,t,n,o,r,s){const i="-"!==o?`<a href="${o}" target="_blank">Pay Here</a>`:"-",l=document.createElement("li");return l.classList.add("order-list-details"),l.innerHTML=`\n    <div class="order-list-details-tiem order-id" style="color:\t#03a9f4">${e}</div>\n    <div class="order-list-details-tiem order-payemnt-status">${t}</div>\n    <div class="order-list-details-tiem order-status">${n}</div>\n    <div class="order-list-details-tiem order-payment-url">${i}</div>\n    <div class="order-list-details-tiem order-total-price"><span>$</span> ${r}</div>\n    <div class="order-list-details-tiem order-created-at">${s}</div>\n  `,l}function s(e,t,n){const o=document.createElement("li");o.classList.add("order-items-item"),o.style.fontSize="10px";const r=document.createElement("div");r.classList.add("order-items-item-details","order-item-title"),r.textContent=e;const s=document.createElement("div");s.classList.add("order-items-item-details","order-item-price"),s.textContent=t;const i=document.createElement("div");return i.classList.add("order-items-item-details","order-item-quantity"),i.textContent=n,o.appendChild(r),o.appendChild(s),o.appendChild(i),o}function i(){const e=document.createElement("div");e.classList.add("logout-area"),e.classList.add("hidden");const t=document.createElement("div");t.classList.add("close-user-profile-options"),t.textContent="x",e.appendChild(t);const n=document.createElement("a");n.href=`${o.R}/profile.html`;const r=document.createElement("button");r.classList.add("profile"),r.textContent="Profile",n.appendChild(r),e.appendChild(n);const s=document.createElement("button");return s.classList.add("logout"),s.textContent="Logout",e.appendChild(s),e}function l(){const e=document.createElement("li");e.classList.add("responsive-profile");const t=document.createElement("a");t.href=`${o.R}/profile.html`;const n=document.createElement("button");n.textContent="Profile",t.appendChild(n),e.appendChild(t);const r=document.createElement("li");r.classList.add("responsive-logout");const s=document.createElement("a");s.href="#";const i=document.createElement("button");return i.classList.add("logout"),i.textContent="Logout",s.appendChild(i),r.appendChild(s),[e,r]}function d(){const e=document.createElement("div");e.classList.add("loading-btn-effect","btn-action");const t=document.createElement("div");t.classList.add("inline-block","h-8","w-8","animate-spin","rounded-full","border-4","border-solid","border-current","border-r-transparent","align-[-0.125em]","motion-reduce:animate-[spin_1.5s_linear_infinite]"),t.setAttribute("role","status");const n=document.createElement("span");return n.classList.add("!absolute","!-m-px","!h-px","!w-px","!overflow-hidden","!whitespace-nowrap","!border-0","!p-0","![clip:rect(0,0,0,0)]"),n.innerText="Loading...",t.appendChild(n),e.appendChild(t),e}const a=d()},779:(e,t,n)=>{n.d(t,{R:()=>o});const o="http://127.0.0.1:5500"},970:(e,t,n)=>{n.d(t,{Jp:()=>s,Kv:()=>r,d_:()=>i});var o=n(335);function r(){return new Promise(((e,t)=>{const n=localStorage.getItem("accessToken");if(console.log(n),"undefined"!==n&&null!==n){const o=new XMLHttpRequest;o.open("GET","http://127.0.0.1:8000/auth/users",!0),o.setRequestHeader("Authorization",`JWT ${n}`),o.send(),o.onload=function(){if(200===o.status){const t=JSON.parse(o.responseText);e(t)}else localStorage.removeItem("accessToken"),t(new Error("Access token is invalid or expired."))},o.onerror=function(){t(new Error("An error occurred while making the request."))}}else t(new Error("Access token is undefined."))}))}function s(){r().then((e=>{console.log(e),document.querySelector("body").style.display="block";const t=document.querySelector("#nav-login-register"),n=document.querySelector("#nav-response-login-register"),r=`<a href="#">${e[0].username}&#9662</a>`;t.innerHTML=r,n.innerHTML=r,(window.location.href.includes("login.html")||window.location.href.includes("signup.html")||window.location.href.includes("password_reset.html"))&&(window.location.href="profile.html");const s=document.querySelector(".nav-response-list"),[i,l]=(0,o.D5)();s.appendChild(i),s.appendChild(l);const d=document.querySelector(".nav-area"),a=(0,o.yE)();d.appendChild(a);const c=document.querySelector(".close-user-profile-options"),u=document.querySelector(".logout-area");t.addEventListener("click",(e=>{e.preventDefault(),u.classList.toggle("hidden")})),c.addEventListener("click",(e=>{e.preventDefault(),u.classList.toggle("hidden")}))})).catch((e=>{window.location.href.includes("profile.html")&&(window.location.href="login.html"),console.error("Error:",e.message)}))}function i(){return new Promise(((e,t)=>{const n=localStorage.getItem("accessToken"),o=new XMLHttpRequest;o.open("GET","http://127.0.0.1:8000/api/customer",!0),o.setRequestHeader("Authorization",`JWT ${n}`),o.send(),o.onload=function(){if(200===o.status){const t=JSON.parse(o.responseText);e(t)}else t(new Error("Customer is not accessable"))},o.onerror=function(){t(new Error("An error occurred while making the request."))}}))}document.body.addEventListener("click",(e=>{const t=(0,o.yx)();if(e.target.classList.contains("logout")){document.body.appendChild(t),localStorage.removeItem("accessToken");const e="http://127.0.0.1:5500/";setTimeout((()=>{window.location.href=e}),1e3)}}))}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=n(215),t=n(970),o=n(594),r=n(335);(0,e.P)(),(0,t.Jp)(),document.body.appendChild(r.c6),window.addEventListener("load",(e=>{document.body.removeChild(r.c6)}));const s=document.querySelector(".edit-profile-btn"),i=document.querySelector(".view-user-account-feature-field").children;s.addEventListener("click",(e=>{e.preventDefault();const t=e.target.closest("li").querySelector("a");if(t.classList.contains("active"));else{s.querySelectorAll("li").forEach((e=>{e.childNodes[1].className="inline-flex p-4 border-b-2 border-transparent rounded-t-lg hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300 group"})),t.className="",t.style.transition="0.5s",t.className="active inline-flex p-4 text-blue-600 border-b-2 border-blue-600 rounded-t-lg dark:text-blue-500 dark:border-blue-500 group";for(let e=0;e<i.length;e++)i[e].style.display="none";e.target.closest("li").classList[0]>=0&&e.target.closest("li").classList[0]<=1&&(i[e.target.closest("li").classList[0]].style.display="block")}}));const l=document.querySelector(".membership-status"),d=document.querySelector(".user-fullname-data"),a=document.querySelector(".user-username-data"),c=document.querySelector(".user-email-data"),u=document.querySelector("#user_email"),m=document.querySelector("#user_name"),p=document.querySelector("#new-first-name"),h=document.querySelector("#new-last-name"),f=document.querySelector("#new-phone"),y=document.querySelector("#new-birth-date");(0,t.Kv)().then((e=>{const t=e[0];d.innerHTML=`${t.first_name} ${t.last_name}`,a.innerHTML=`${t.username}`,c.innerHTML=`${t.email}`,u.value=t.email,m.value=`@${t.username}`,p.value=t.first_name,h.value=t.last_name})),(0,t.d_)().then((e=>{const t=e[0];l.innerHTML=t.membership,f.value=t.phone,console.log(t),y.value=t.birth_date}));const v=(0,o.xO)("GET","http://127.0.0.1:8000/api/orders/","USER","can't fetch the order");function g(e){let t="";return"P"===e?t="PENDING":"C"===e?t="COMPLETE":"F"==e&&(t="FAILED"),t}const L=document.querySelector(".order-list");v.then((e=>{let t=0;if(0===e.length);else{function n(){for(let n=t;n<Math.min(e.length,t+10);n++){const t=e[n],o=`<button class="order-id-btn">${t.pk}</button>`,s=g(t.payment_status),i=g(t.order_status),l=t.payment_url,d=t.total_price,a=t.created_at.split("T")[0],c=(0,r.R$)(o,s,i,l,d,a);L.appendChild(c)}}n();const o=document.querySelector(".load-more");o.classList.remove("hidden"),10>=e.length&&o.classList.add("hidden"),o.addEventListener("click",(r=>{t+=10,t!==e.length?n():o.classList.add("hidden")}))}}));const E=document.querySelector(".order-items-items"),b=document.querySelector(".order-items-container");document.querySelector(".order-items-hide-btn").addEventListener("click",(e=>{const t=E.firstElementChild;E.innerHTML="",E.appendChild(t),b.style.display="none"})),L.addEventListener("click",(e=>{e.target.classList.contains("order-id-btn")&&(document.body.appendChild(r.c6),document.querySelector(".order-items-order-id").innerHTML=`ORDER ID : ${e.target.textContent}`,(0,o.xO)("GET",`http://127.0.0.1:8000/api/orders/${e.target.textContent}/`,"USER","can't fetch the order").then((e=>{e.items.forEach((e=>{const t=e.product.title,n=e.unit_price,o=e.quantity,s=(0,r.HV)(t,n,o);E.appendChild(s)}))})),b.style.display="block",setTimeout((()=>{document.body.removeChild(r.c6)}),400))}))})()})();