(()=>{"use strict";var e={594:(e,t,n)=>{function o(e,t,n,o,c){return new Promise(((r,a)=>{const s=new XMLHttpRequest;if(s.open(e,t,!0),"USER"==n){const e=localStorage.getItem("accessToken");s.setRequestHeader("Authorization",`JWT ${e}`),s.send()}else"PATCH"===n?(s.setRequestHeader("Content-Type","application/json"),s.send(JSON.stringify(c))):(s.setRequestHeader("Content-Type","applicaton/json"),s.send());s.onload=function(){if("POST"===e)if(201===s.status){const e=JSON.parse(s.responseText);r(e)}else a(new Error(o));else if("GET"==e)if(200===s.status){const e=JSON.parse(s.responseText);r(e)}else a(new Error(o));else"PATCH"===e&&(200===s.status?r(s.statusText):a(new Error(o)))}}))}async function c(e){try{const t=await fetch(e);if(!t.ok)throw new Error("Request failed with status code "+t.status);return await t.json()}catch(e){console.error("Error:",e)}}n.d(t,{rQ:()=>c,xO:()=>o})},335:(e,t,n)=>{n.d(t,{aJ:()=>o,yx:()=>c});const o=(e,t,n,o)=>{const c=document.createElement("li");c.classList.add("flex-cart-items");const r=document.createElement("div");r.classList.add("cart-item-img");const a=document.createElement("img");a.src=o||"/assets/no-camera.png",a.alt="",a.style.width="90px",r.appendChild(a);const s=document.createElement("div");s.classList.add("cart-item-quantity-remove");const i=document.createElement("div");i.classList.add("cart-item-remove-btn");const l=document.createElement("img");l.classList.add("cart-item-remove"),l.src="/assets/bin.png",l.alt="remove",l.style.width="30px",i.appendChild(l);const d=document.createElement("div");d.classList.add("cart-item-quantity");const p=document.createElement("select");p.classList.add("cart-select"),p.style.backgroundColor="#111827";const u=document.createElement("option");u.value="1",u.selected=!0,u.textContent="1",p.appendChild(u);const m=document.createElement("option");m.value="2",m.textContent="2",p.appendChild(m);const h=document.createElement("option");h.value="3",h.textContent="3",p.appendChild(h);const x=document.createElement("option");x.value="4",x.textContent="4",p.appendChild(x);const C=document.createElement("option");C.value="5",C.textContent="5",p.appendChild(C),d.appendChild(p),s.appendChild(i),s.appendChild(d);const g=document.createElement("div");g.classList.add("cart-item-details"),g.style.marginRight="10px";const E=document.createElement("div");E.classList.add("cart-item-name");const y=document.createElement("p");y.style.fontSize="11px",y.textContent="Name : "+e,E.appendChild(y);const v=document.createElement("div");v.classList.add("cart-item-price"),v.style.fontSize="11px",v.textContent="Price : "+t,g.appendChild(E),g.appendChild(v);const f=document.createElement("div");return f.classList.add("cart-item-total"),f.style.fontSize="14px",f.innerHTML=`${n}$`,c.appendChild(r),c.appendChild(s),c.appendChild(g),c.appendChild(f),c};function c(){const e=document.createElement("div");e.classList.add("loading-btn-effect","btn-action");const t=document.createElement("div");t.classList.add("inline-block","h-8","w-8","animate-spin","rounded-full","border-4","border-solid","border-current","border-r-transparent","align-[-0.125em]","motion-reduce:animate-[spin_1.5s_linear_infinite]"),t.setAttribute("role","status");const n=document.createElement("span");return n.classList.add("!absolute","!-m-px","!h-px","!w-px","!overflow-hidden","!whitespace-nowrap","!border-0","!p-0","![clip:rect(0,0,0,0)]"),n.innerText="Loading...",t.appendChild(n),e.appendChild(t),e}c()},779:(e,t,n)=>{n.d(t,{R:()=>c,Y:()=>o});const o="http://127.0.0.1:8000",c="http://127.0.0.1:5500"}},t={};function n(o){var c=t[o];if(void 0!==c)return c.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=n(594),t=n(335),o=n(779);const c=localStorage.getItem("cart_id");console.log(c),null===c&&new Promise(((e,t)=>{const n=new XMLHttpRequest;n.open("POST",`${o.Y}/api/carts/`,!0),n.setRequestHeader("Content-Type","applicaton/json"),n.send(),n.onload=function(){if(201===n.status){const t=JSON.parse(n.responseText);e(t)}else t(new Error("can't do this "))}})).then((e=>{localStorage.setItem("cart_id",e.id)})),function(){let n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const r=document.querySelector(".cart-details-fixed-area");document.querySelector(".cart-item-total"),document.querySelector(".cart-item-price span"),!1===n&&r.addEventListener("click",(e=>{if("cart-item-remove"==e.target.classList.value){const t=e.target.closest("li").querySelector(".cart-item-total").textContent,n=parseFloat(t.replace(/\$/g,"")),r=document.querySelector(".cart-total-price");let a=parseFloat(r.textContent);console.log(n),a-=n;const s=document.querySelector(".cart-count");let i=parseFloat(s.textContent);i--,s.textContent=i,r.textContent=a.toFixed(2),e.target.closest("li").remove();const l=`${o.Y}/api/carts/${c}/items/${e.target.id}`;fetch(l,{method:"DELETE"}).then((e=>{e.ok?console.log("Item deleted successfully."):console.error("Error deleting item.")})).catch((e=>{console.error("Error:",e)}))}})),null!==c&&(0,e.rQ)(`${o.Y}/api/carts/${c}/items`).then((n=>{const r=n;document.querySelector(".cart-count").textContent=r.length;const a=document.querySelector(".cart-total-price");let s=0;r.forEach((n=>{const r=n.product.title,i=n.product.price,l=n.total_price;s+=l;let d=l.toFixed(2),p="";n.product.image.length>0&&(p=o.Y+n.product.image[0].image);const u=(0,t.aJ)(r,i,d,p),m=document.querySelector(".flex-cart-list");u.querySelector(".cart-select").value=n.quantity,u.querySelector(".cart-item-remove").setAttribute("id",`${n.id}`),u.querySelector(".cart-select").addEventListener("change",(e=>{const t=u.querySelector(".cart-item-total");let n=(e.target.value*i).toFixed(2);t.innerHTML=`${n}$`}));const h=u.querySelector(".cart-select");h.setAttribute("id",n.id),h.addEventListener("change",(t=>{const n=t.target.value,r=t.target.id,s=`${o.Y}/api/carts/${c}/items/${r}/`,i={quantity:n};(0,e.xO)("PATCH",s,"PATCH","Error Updating the data",i).then((t=>{(0,e.xO)("GET",`${o.Y}/api/carts/${c}`,"","Can't get the data").then((e=>{a.textContent=e.total_price}))}))})),m.appendChild(u)})),a.textContent=s.toFixed(2)}))}(),document.querySelector(".checkout-btn").addEventListener("click",(e=>{const n=localStorage.getItem("cart_id");0==document.querySelector(".flex-cart-list").childElementCount||(document.body.append((0,t.yx)()),setTimeout((()=>{window.location.href=`${o.R}/checkout.html?cart_id=${n}`}),1e3))}))})()})();