(()=>{"use strict";var e={594:(e,t,n)=>{function o(e,t,n,o,r){return new Promise(((c,a)=>{const s=new XMLHttpRequest;if(s.open(e,t,!0),"USER"==n){const e=localStorage.getItem("accessToken");s.setRequestHeader("Authorization",`JWT ${e}`),s.send()}else"PATCH"===n?(s.setRequestHeader("Content-Type","application/json"),s.send(JSON.stringify(r))):(s.setRequestHeader("Content-Type","applicaton/json"),s.send());s.onload=function(){if("POST"===e)if(201===s.status){const e=JSON.parse(s.responseText);c(e)}else a(new Error(o));else if("GET"==e)if(200===s.status){const e=JSON.parse(s.responseText);c(e)}else a(new Error(o));else"PATCH"===e&&(200===s.status?c(s.statusText):a(new Error(o)))}}))}async function r(e){try{const t=await fetch(e);if(!t.ok)throw new Error("Request failed with status code "+t.status);return await t.json()}catch(e){console.error("Error:",e)}}n.d(t,{rQ:()=>r,xO:()=>o})},335:(e,t,n)=>{n.d(t,{aJ:()=>o,yx:()=>r});const o=(e,t,n,o)=>{const r=document.createElement("li");r.classList.add("flex-cart-items");const c=document.createElement("div");c.classList.add("cart-item-img");const a=document.createElement("img");a.src=o||"/assets/no-camera.png",a.alt="product",c.appendChild(a);const s=document.createElement("div");s.classList.add("cart-item-quantity-remove");const i=document.createElement("div");i.classList.add("cart-item-remove-btn");const l=document.createElement("img");l.classList.add("cart-item-remove"),l.src="/assets/bin.png",l.alt="remove",l.style.width="30px",i.appendChild(l);const d=document.createElement("div");d.classList.add("cart-item-quantity");const p=document.createElement("select");p.classList.add("cart-select"),p.style.backgroundColor="#111827";const u=document.createElement("option");u.value="1",u.selected=!0,u.textContent="1",p.appendChild(u);const m=document.createElement("option");m.value="2",m.textContent="2",p.appendChild(m);const h=document.createElement("option");h.value="3",h.textContent="3",p.appendChild(h);const x=document.createElement("option");x.value="4",x.textContent="4",p.appendChild(x);const g=document.createElement("option");g.value="5",g.textContent="5",p.appendChild(g),d.appendChild(p),s.appendChild(i),s.appendChild(d);const C=document.createElement("div");C.classList.add("cart-item-details"),C.style.marginRight="10px";const y=document.createElement("div");y.classList.add("cart-item-name");const E=document.createElement("p");E.style.fontSize="11px",E.textContent="Name : "+e,y.appendChild(E);const f=document.createElement("div");f.classList.add("cart-item-price"),f.style.fontSize="11px",f.textContent="Price : "+t,C.appendChild(y),C.appendChild(f);const v=document.createElement("div");return v.classList.add("cart-item-total"),v.style.fontSize="14px",v.innerHTML=`${n}$`,r.appendChild(c),r.appendChild(s),r.appendChild(C),r.appendChild(v),r};function r(){const e=document.createElement("div");e.classList.add("loading-btn-effect","btn-action");const t=document.createElement("div");t.classList.add("inline-block","h-8","w-8","animate-spin","rounded-full","border-4","border-solid","border-current","border-r-transparent","align-[-0.125em]","motion-reduce:animate-[spin_1.5s_linear_infinite]"),t.setAttribute("role","status");const n=document.createElement("span");return n.classList.add("!absolute","!-m-px","!h-px","!w-px","!overflow-hidden","!whitespace-nowrap","!border-0","!p-0","![clip:rect(0,0,0,0)]"),n.innerText="Loading...",t.appendChild(n),e.appendChild(t),e}r()},779:(e,t,n)=>{n.d(t,{R:()=>r,Y:()=>o});const o="http://127.0.0.1:8000",r="http://127.0.0.1:5500"}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var c=t[o]={exports:{}};return e[o](c,c.exports,n),c.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=n(594),t=n(335),o=n(779);const r=localStorage.getItem("cart_id");console.log(r),null===r&&new Promise(((e,t)=>{const n=new XMLHttpRequest;n.open("POST",`${o.Y}/api/carts/`,!0),n.setRequestHeader("Content-Type","applicaton/json"),n.send(),n.onload=function(){if(201===n.status){const t=JSON.parse(n.responseText);e(t)}else t(new Error("can't do this "))}})).then((e=>{localStorage.setItem("cart_id",e.id),window.location.reload()})),function(){let n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const c=document.querySelector(".cart-details-fixed-area");document.querySelector(".cart-item-total"),document.querySelector(".cart-item-price span"),!1===n&&c.addEventListener("click",(e=>{if("cart-item-remove"==e.target.classList.value){const t=e.target.closest("li").querySelector(".cart-item-total").textContent,n=parseFloat(t.replace(/\$/g,"")),c=document.querySelector(".cart-total-price");let a=parseFloat(c.textContent);console.log(n),a-=n;const s=document.querySelector(".cart-count");let i=parseFloat(s.textContent);i--,s.textContent=i,c.textContent=a.toFixed(2),e.target.closest("li").remove();const l=`${o.Y}/api/carts/${r}/items/${e.target.id}`;fetch(l,{method:"DELETE"}).then((e=>{if(e.ok){console.log("Item deleted successfully.");const e=document.querySelector(".flex-cart-list");0===e.childElementCount&&(e.innerHTML='\n        \n                    <h1 style="font-size: 30px; margin: auto;margin-top:50%; width:100px">Empty</h1>\n          \n                    ')}else console.error("Error deleting item.")})).catch((e=>{console.error("Error:",e)}))}})),null!==r&&(0,e.rQ)(`${o.Y}/api/carts/${r}/items`).then((n=>{0===n.length&&(document.querySelector(".flex-cart-list").innerHTML='\n\n          <h1 style="font-size: 30px; margin: auto;margin-top:50%; width:100px">Empty</h1>\n\n          ');const c=n;document.querySelector(".cart-count").textContent=c.length;const a=document.querySelector(".cart-total-price");let s=0;c.forEach((n=>{const c=n.product.title,i=n.product.price,l=n.total_price;s+=l;let d=l.toFixed(2),p="";n.product.image.length>0&&(p=o.Y+n.product.image[0].image);const u=(0,t.aJ)(c,i,d,p),m=document.querySelector(".flex-cart-list");u.querySelector(".cart-select").value=n.quantity,u.querySelector(".cart-item-remove").setAttribute("id",`${n.id}`),u.querySelector(".cart-select").addEventListener("change",(e=>{const t=u.querySelector(".cart-item-total");let n=(e.target.value*i).toFixed(2);t.innerHTML=`${n}$`}));const h=u.querySelector(".cart-select");h.setAttribute("id",n.id),h.addEventListener("change",(t=>{const n=t.target.value,c=t.target.id,s=`${o.Y}/api/carts/${r}/items/${c}/`,i={quantity:n};(0,e.xO)("PATCH",s,"PATCH","Error Updating the data",i).then((t=>{(0,e.xO)("GET",`${o.Y}/api/carts/${r}`,"","Can't get the data").then((e=>{a.textContent=e.total_price}))}))})),m.appendChild(u)})),a.textContent=s.toFixed(2)}))}(),document.querySelector(".checkout-btn").addEventListener("click",(e=>{const n=localStorage.getItem("cart_id");0==document.querySelector(".flex-cart-list").childElementCount||(document.body.append((0,t.yx)()),setTimeout((()=>{window.location.href=`${o.R}/checkout.html?cart_id=${n}`}),1e3))}))})()})();