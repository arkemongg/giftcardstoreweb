(()=>{"use strict";var e={594:(e,t,o)=>{o.d(t,{LV:()=>r,rQ:()=>c});var n=o(779);async function c(e){try{const t=await fetch(e);if(!t.ok)throw new Error("Request failed with status code "+t.status);return await t.json()}catch(e){console.error("Error:",e)}}async function r(e,t){const o=`${n.Y}/api/orders/`;try{const n=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`JWT ${e}`},body:JSON.stringify({cart_id:t})});if(//console.log("ok"),n.ok){const e=await n.json();return //console.log(e),e}throw //console.log(n),new Error("Error: "+n.status)}catch(e){throw console.error(e),e}}},215:(e,t,o)=>{function n(){let e=document.querySelector(".nav-responsive"),t=document.querySelector(".nav-response-list");document.getElementById("nav-res-btn").addEventListener("click",(function(o){o.preventDefault(),window.scrollTo({top:0,behavior:"smooth"}),e.classList.toggle("display-none"),e.classList.toggle("display-block"),t.classList.toggle("display-block"),t.classList.toggle("display-none")}))}o.d(t,{P:()=>n})},335:(e,t,o)=>{o.d(t,{BU:()=>r,D5:()=>s,c6:()=>i,gC:()=>c,yE:()=>d,yx:()=>a});var n=o(779);function c(e,t,o,n,c){const r=document.createElement("div");r.classList.add("product-container-card");const d=document.createElement("div");d.classList.add("checkout-item-img");const s=document.createElement("img");s.src=c||"/assets/no-camera.png",s.alt="product-image",d.appendChild(s),r.appendChild(d);const a=document.createElement("div");a.classList.add("checkout-item-quantity-remove");const i=document.createElement("div");i.classList.add("checkout-item-quantity");const l=document.createElement("select");l.classList.add("checkout-select","bg-gray-50","border","border-gray-300","text-gray-900","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500");for(let t=1;t<=5;t++){const o=document.createElement("option");o.value=t,o.textContent=t,t===e&&(o.selected=!0),l.appendChild(o)}i.appendChild(l),a.appendChild(i),r.appendChild(a);const u=document.createElement("div");u.classList.add("checkout-item-details");const m=document.createElement("div");m.classList.add("checkout-item-name");const p=document.createElement("p");p.textContent=t,m.appendChild(p);const h=document.createElement("div");h.classList.add("checkout-item-price");const g=document.createElement("span");g.textContent="$";const v=document.createElement("span");v.classList.add("checkout-item-price"),v.classList.add("checkout-item-price-total"),v.textContent=o,h.appendChild(g),h.appendChild(v),u.appendChild(m),u.appendChild(h),r.appendChild(u);const L=document.createElement("div");L.classList.add("checkout-item-total"),L.style.fontSize="14px";const f=document.createElement("span");f.textContent="$";const E=document.createElement("span");E.classList.add("checkout-item-total-price"),E.textContent=n,L.appendChild(f),L.appendChild(E),r.appendChild(L);const y=document.createElement("div");y.classList.add("checkout-item-remove-btn");const b=document.createElement("img");return b.classList.add("checkout-item-remove"),b.src="/assets/bin.png",b.alt="remove",y.appendChild(b),r.appendChild(y),r}function r(e,t,o){const n=document.createElement("div");n.classList.add("details-checkout-item-container-title");const c=document.createElement("p");c.classList.add("checkout-item-title-title"),c.textContent=e,n.appendChild(c);const r=document.createElement("p");r.classList.add("checkout-item-title-price"),r.textContent="$"+t,n.appendChild(r);const d=document.createElement("p");return d.classList.add("checkout-item-title-quantity"),d.textContent=o,n.appendChild(d),n}function d(){const e=document.createElement("div");e.classList.add("logout-area"),e.classList.add("hidden");const t=document.createElement("div");t.classList.add("close-user-profile-options"),t.textContent="x",e.appendChild(t);const o=document.createElement("a");o.href=`${n.R}/profile.html`;const c=document.createElement("button");c.classList.add("profile"),c.textContent="Profile",o.appendChild(c),e.appendChild(o);const r=document.createElement("button");return r.classList.add("logout"),r.textContent="Logout",e.appendChild(r),e}function s(){const e=document.createElement("li");e.classList.add("responsive-profile");const t=document.createElement("a");t.href=`${n.R}/profile.html`;const o=document.createElement("button");o.textContent="Profile",t.appendChild(o),e.appendChild(t);const c=document.createElement("li");c.classList.add("responsive-logout");const r=document.createElement("a");r.href="#";const d=document.createElement("button");return d.classList.add("logout"),d.textContent="Logout",r.appendChild(d),c.appendChild(r),[e,c]}function a(){const e=document.createElement("div");e.classList.add("loading-btn-effect","btn-action");const t=document.createElement("div");t.classList.add("inline-block","h-8","w-8","animate-spin","rounded-full","border-4","border-solid","border-current","border-r-transparent","align-[-0.125em]","motion-reduce:animate-[spin_1.5s_linear_infinite]"),t.setAttribute("role","status");const o=document.createElement("span");return o.classList.add("!absolute","!-m-px","!h-px","!w-px","!overflow-hidden","!whitespace-nowrap","!border-0","!p-0","![clip:rect(0,0,0,0)]"),o.innerText="Loading...",t.appendChild(o),e.appendChild(t),e}const i=a()},779:(e,t,o)=>{o.d(t,{R:()=>c,Y:()=>n});const n="http://127.0.0.1:8000",c="http://127.0.0.1:5500"},970:(e,t,o)=>{o.d(t,{Jp:()=>r});var n=o(335),c=o(779);function r(){new Promise(((e,t)=>{const o=localStorage.getItem("accessToken");if(//console.log(o),"undefined"!==o&&null!==o){const n=new XMLHttpRequest;n.open("GET",`${c.Y}/auth/users`,!0),n.setRequestHeader("Authorization",`JWT ${o}`),n.send(),n.onload=function(){if(200===n.status){const t=JSON.parse(n.responseText);e(t)}else localStorage.removeItem("accessToken"),t(new Error("Access token is invalid or expired."))},n.onerror=function(){t(new Error("An error occurred while making the request."))}}else t(new Error("Access token is undefined."))})).then((e=>{//console.log(e),document.querySelector("body").style.display="block";const t=document.querySelector("#nav-login-register"),o=document.querySelector("#nav-response-login-register"),c=`<a href="#">${e[0].username}&#9662</a>`;t.innerHTML=c,o.innerHTML=c,(window.location.href.includes("login.html")||window.location.href.includes("signup.html")||window.location.href.includes("password_reset.html"))&&(window.location.href="profile.html");const r=document.querySelector(".nav-response-list"),[d,s]=(0,n.D5)();r.appendChild(d),r.appendChild(s);const a=document.querySelector(".nav-area"),i=(0,n.yE)();a.appendChild(i);const l=document.querySelector(".close-user-profile-options"),u=document.querySelector(".logout-area");t.addEventListener("click",(e=>{e.preventDefault(),u.classList.toggle("hidden")})),l.addEventListener("click",(e=>{e.preventDefault(),u.classList.toggle("hidden")}))})).catch((e=>{window.location.href.includes("profile.html")&&(window.location.href="login.html"),console.error("Error:",e.message)}))}document.body.addEventListener("click",(e=>{const t=(0,n.yx)();if(e.target.classList.contains("logout")){document.body.appendChild(t),localStorage.removeItem("accessToken");const e=`${c.R}`;setTimeout((()=>{window.location.href=e}),1e3)}}))}},t={};function o(n){var c=t[n];if(void 0!==c)return c.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=o(970),t=o(215),n=o(594),c=o(335),r=o(779);document.body.appendChild(c.c6),(0,t.P)(),(0,e.Jp)();const d=new URL(window.location.href),s=new URLSearchParams(d.search).get("cart_id"),a=document.querySelector(".product-container"),i=(0,n.rQ)(`${r.Y}/api/carts/${s}/`);let l=0;i.then((e=>{e.items.forEach((e=>{const t=e.quantity,o=e.product.title,n=e.product.price,r=e.total_price,d=(0,c.gC)(t,o,n,r);a.appendChild(d),l+=e.total_price,d.querySelector("select").setAttribute("id",e.id)}));const t=a.querySelectorAll(".checkout-select"),o=document.querySelector(".total-checkout-amount-value");function n(){0===a.childElementCount&&(document.querySelectorAll(".checkout-options button").forEach((e=>{e.disabled=!0})),a.innerHTML="empty")}o.textContent=l.toFixed(2),t.forEach((e=>{e.addEventListener("change",(e=>{const t=e.target.closest(".product-container-card"),n=t.querySelector(".checkout-item-total-price"),c=t.querySelector(".checkout-item-total-price").textContent;l-=c;const d=t.querySelector(".checkout-item-price-total").textContent,a=e.target.value*d;n.textContent=a.toFixed(2),l+=a,o.textContent=l.toFixed(2);let i={quantity:e.target.value};const u=e.target.id;fetch(`${r.Y}/api/carts/${s}/items/${u}/`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((e=>{})).catch((e=>{//console.log("Error:",e)}))}))})),a.addEventListener("click",(e=>{if(e.target.classList.contains("checkout-item-remove")){const t=e.target.closest(".product-container-card");t.remove();const n=t.querySelector(".checkout-item-total-price").textContent,c=t.querySelector("select").getAttribute("id");l-=n,fetch(`${r.Y}/api/carts/${s}/items/${c}/`,{method:"DELETE"}).then((e=>{e.ok?//console.log("DELETE request successful")://console.log("DELETE request failed")})).catch((e=>{//console.log("Error:",e)})),o.textContent=l.toFixed(2)}n()})),n()})).catch((e=>{document.querySelectorAll(".checkout-options button").forEach((e=>{e.disabled=!0})),a.innerHTML="error"}));const u=document.querySelector(".checkout-checkout"),m=document.querySelector(".details-checkout-item-container"),p=document.querySelector(".checkout-page-containers"),h=document.querySelector(".your-account-details"),g=document.querySelector(".account-page-container"),v=localStorage.getItem("accessToken");h.disabled=!0,null==v&&(h.disabled=!1,u.disabled=!0);const L=document.querySelector(".your-product");L.disabled=!0;const f=document.querySelector(".order-details-container");L.addEventListener("click",(e=>{if(null!==v){u.disabled=!1,u.classList.remove("active-border"),p.classList.add("hidden");const e=m.firstElementChild;m.innerHTML="",m.appendChild(e)}else g.classList.add("hidden"),h.classList.remove("active-border"),h.disabled=!1;f.classList.remove("hidden"),L.disabled=!0,L.classList.add("active-border")})),u.addEventListener("click",(e=>{document.body.appendChild(c.c6),u.disabled=!0,L.disabled=!1,L.classList.remove("active-border"),f.classList.add("hidden"),u.classList.add("active-border"),p.classList.remove("hidden");const t=document.querySelector(".total-tax-shiping .total-value");let o=0;(0,n.rQ)(`${r.Y}/api/carts/${s}/`).then((e=>{e.items.forEach((e=>{const t=e.quantity,n=e.product.title,r=e.product.price;o+=r*t;const d=(0,c.BU)(n,r,t);m.appendChild(d)})),t.textContent="$"+o.toFixed(2),setTimeout((()=>{document.body.removeChild(c.c6)}),1e3)})).catch((e=>{//console.log("error")}))})),h.addEventListener("click",(e=>{L.disabled=!1,L.classList.remove("active-border"),f.classList.add("hidden"),h.disabled=!0,h.classList.add("active-border"),g.classList.remove("hidden")})),document.querySelector(".checkout-next-btn").addEventListener("click",(e=>{!0===h.disabled?u.click():h.click()})),document.querySelector(".account-page-login-sign-up").addEventListener("click",(()=>{window.location.href=`${r.R}/login.html`})),document.querySelector(".checkout-create-order").addEventListener("click",(e=>{(0,n.LV)(v,s).then((e=>{window.location.href=`${r.R}/order_created.html`})),localStorage.removeItem("cart_id")})),window.addEventListener("load",(e=>{setTimeout((()=>{document.body.removeChild(c.c6)}),1e3)}))})()})();